
.PHONY: init validate plan apply test run destroy all

init:
	@echo "ğŸ“¦ Initializing Terraform..."
	terraform init

validate:
	@echo "ğŸ” Validating Terraform..."
	terraform validate

plan-apply:
	@echo "âš¡ Generating Terraform plan..."
	terraform plan -out=k8s.plan 
	terraform apply k8s.plan

test:
	@echo "ğŸ©º Checking Kubernetes resources..."
	kubectl get pods -A
	kubectl get svc -A
	kubectl get ingress -A


run: init validate plan-apply test
	@echo "âœ… SYSTEM ONLINE"

destroy:
	@echo "ğŸ’¥ Destroying Terraform resources..."
	terraform destroy -auto-approve

all: run